<html>
    <head>
        <title>To-Do</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='styles/toDoList.css') }}" />
        <script src="{{ url_for('static', filename='js/toDoList.js') }}"></script>
        <script src="https://kit.fontawesome.com/05c2be17c9.js" crossorigin="anonymous"></script>
    </head>
    <body>
        <div id="container">
            <h3 id="header">To Do List</h3>
            <form action="/agregar" id="todo-form" method="POST">
                <input type="text" name="tarea" id="inputTarea" placeholder="Agregar actividad..." />
                <button class="botonAnadir" type="submit">
                    <i class="fa-solid fa-plus"></i>
                </button>
            </form>

        <nav class="nav">
            <ul>
                <li><a href="#seccionAll" class="enlace-all"> All</a></li>
                <li><a href="#seccionActive" class="enlace-active"> Active</a></li>
                <li><a href="#seccionCompleted" class="enlace-completed"> Completed</a></li>
            </ul>
        </nav>
    
        <section id="seccionAll" class="seccion">
            <ul id="actividadesTodas">
                {% for actividad in actividades %}
                <li>
                    <div class="taskDetalles">
                        <form action="/marcarCompletada" method="POST">
                            <label>
                                <input type="checkbox" name="tarea" value="{{ actividad.getNombre() }}" data-estado="{{ actividad.getEstado() }}" onchange="this.form.submit()" class="checkbox-tarea" {% if actividad.getEstado() == 'Inactive' %}checked{% endif %}>
                            </label>
                        </form>
                        <label name="tareaEditar" id="{{ actividad.getNombre() }}">{{ actividad.getNombre() }}</label>
                    </div>
                    <div class="taskAcciones">
                        <button class="boton-editar" type="button" data-nombre="{{ actividad.getNombre() }}"><i class="fa-solid fa-pencil"></i></button>
    
                        <form action="/editar" method="POST"> 
                            <input type="hidden" name="tareaEditar" value="{{ actividad.getNombre() }}">
                            <input class="formEditar" type="text" name="nuevoNombre" id="inputEditar" placeholder="editar Actividad" style="display: none;" />
                            <button class="boton guardar" type="submit" style="display: none;">Guardar</button>
                            <button class="boton cancelar" type="button" style="display: none;">Cancelar</button>
                        </form>
    
                        <form action="/eliminar" method="POST" class="eliminar-form">
                            <input type="hidden" name="tareaEliminar" value="{{ actividad.getNombre() }}">
                            <button class="boton eliminar" type="submit"><i class="fa-solid fa-trash"></i></button>
                        </form>
                    </div>  
                </li>
                {% endfor %}
            </ul>
        </section>
        
        <section id="seccionActive" class="seccion">
            <ul id="actividadesActivas">
                {% for actividad in actividadesActivas %}
                <li>
                    <div class="taskDetalles">
                        <form action="/marcarCompletada" method="POST">
                            <label>
                                <input type="checkbox" name="tarea" value="{{ actividad.getNombre() }}" data-estado="{{ actividad.getEstado() }}" class="checkbox-tarea" onchange="this.form.submit()">
                            </label>
                        </form>
                        
                        <label name="tareaEditar" id="{{ actividad.getNombre() }}">{{ actividad.getNombre() }}</label>
                    </div>
                    <div class="taskAcciones">
                        <button class="boton-editar" type="button" data-nombre="{{ actividad.getNombre() }}"><i class="fa-solid fa-pencil"></i></button>
    
                        <form action="/editar" method="POST"> 
                            <input type="hidden" name="tareaEditar" value="{{ actividad.getNombre() }}">
                            <input class="formEditar" type="text" name="nuevoNombre" id="inputEditar" placeholder="editar Actividad" style="display: none;" />
                            <button class="boton guardar" type="submit" style="display: none;">Guardar</button>
                            <button class="boton cancelar" type="button" style="display: none;">Cancelar</button>
                        </form>
    
                        <form action="/eliminar" method="POST" class="eliminar-form">
                            <input type="hidden" name="tareaEliminar" value="{{ actividad.getNombre() }}">
                            <button class="boton eliminar" type="submit"><i class="fa-solid fa-trash"></i></button>
                        </form>
                    </div>
                </li>
                {% endfor %}
            </ul>
        </section>
        
        <section id="seccionCompleted" class="seccion">
            <ul id="actividadesInactivas">
                {% for actividad in actividadesInactivas %}
                <li>
                    <div class="taskDetalles">
                        <form action="/marcarCompletada" method="POST">
                            <label>
                                <input type="checkbox" name="tarea" value="{{ actividad.getNombre() }}" data-estado="{{ actividad.getEstado() }}" class="checkbox-tarea" checked>
                            </label>
                        </form>
                        
                        <label name="tareaEditar" id="{{ actividad.getNombre() }}">{{ actividad.getNombre() }}</label>
                    </div>
                    <div class="taskAcciones">
                    <button class="boton-editar" type="button" data-nombre="{{ actividad.getNombre() }}"><i class="fa-solid fa-pencil"></i></button>
    
                    <form action="/editar" method="POST"> 
                        <input type="hidden" name="tareaEditar" value="{{ actividad.getNombre() }}">
                        <input class="formEditar" type="text" name="nuevoNombre" id="inputEditar" placeholder="Editar actividad..." style="display: none;" />
                        <button class="boton guardar" type="submit" style="display: none;">Guardar</button>
                        <button class="boton cancelar" type="button" style="display: none;">Cancelar</button>
                    </form>
                    
    
                    <form action="/eliminar" method="POST" class="eliminar-form">
                        <input type="hidden" name="tareaEliminar" value="{{ actividad.getNombre() }}">
                        <button class="boton eliminar" type="submit"><i class="fa-solid fa-trash"></i></button>
                    </form>
                </div>
                </li>
                {% endfor %}
            </ul>
        </section>
        
        <div class="footer">
            <p id="actividades-pendientes">{{ actividadesPendientes }} actividad(es) pendiente(s).</p>
            <form action="/limpiarActividadesCompletadas" method="POST">
                <button type="submit" id="actividades-completadas">Eliminar tareas completadas</button>
            </form>
        </div>
        
    </body>
</html>
